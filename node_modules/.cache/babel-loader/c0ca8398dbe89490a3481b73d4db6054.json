{"ast":null,"code":"var _jsxFileName = \"/Users/norikon/ReactSite/v3/react_social_web/src/components/MainPage/MainPage.js\";\nimport React from 'react';\nimport classes from './MainPage.module.css';\nimport { Link } from 'react-router-dom';\nimport { Button, Card, CardActionArea, CardContent, Typography, CardActions } from '@material-ui/core';\nimport { Redirect } from 'react-router-dom';\n\nclass MainPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: '',\n      description: ''\n    };\n\n    this.onBtnClick = () => {\n      this.props.addPost(this.state);\n      this.setState({\n        title: '',\n        description: ''\n      });\n      this.props.watchPost();\n    };\n\n    this.changeNewPost = e => {\n      const id = e.currentTarget.id;\n      this.setState({\n        [id]: e.currentTarget.value\n      });\n    };\n  }\n\n  render() {\n    if (!localStorage.getItem('Uid')) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, React.createElement(Redirect, {\n        to: '/login',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }));\n    }\n\n    const comments = this.props.data.comment;\n    let allPosts;\n\n    if (this.props.data.post[0]) {\n      allPosts = this.props.data.post.sort(function (a, b) {\n        if (a.created_at > b.created_at) {\n          return -1;\n        }\n\n        if (a.created_at < b.created_at) {\n          return 1;\n        }\n\n        return 0;\n      });\n    }\n\n    if (this.props.data.post.length) {\n      allPosts = this.props.data.post.map(function (item) {\n        let comCount = [];\n\n        if (comments[0]) {\n          comments.forEach(i => {\n            if (i.commentable_id == item.id) {\n              comCount.push(i);\n            }\n          });\n        }\n\n        return React.createElement(Card, {\n          key: item.id,\n          className: classes.card,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(CardActionArea, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(CardContent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: `/post/${item.id}`,\n          className: classes.link_title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          gutterBottom: true,\n          variant: \"h5\",\n          component: \"h2\",\n          className: classes.link,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, item.title), React.createElement(Typography, {\n          className: classes.description,\n          variant: \"body2\",\n          color: \"textSecondary\",\n          component: \"p\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, item.description)))), React.createElement(CardActions, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, \"Comments:\", comCount.length)));\n      });\n    } else if (this.props.data.post.loading) {\n      allPosts = React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Load...\");\n    } else {\n      allPosts = React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"No posts :(\");\n    }\n\n    return React.createElement(\"div\", {\n      className: classes.main,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.position_posts,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, allPosts, React.createElement(\"div\", {\n      className: classes.post_count,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"post count: \", this.props.data.post.length))), React.createElement(\"form\", {\n      className: classes.form_post,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Title:\"), React.createElement(\"input\", {\n      value: this.state.title,\n      onChange: this.changeNewPost,\n      className: classes.title_input,\n      id: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      value: this.state.description,\n      onChange: this.changeNewPost,\n      id: \"description\",\n      className: classes.description_input,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: this.onBtnClick,\n      variant: \"contained\",\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Add post\")));\n  }\n\n}\n\nexport default MainPage;","map":{"version":3,"sources":["/Users/norikon/ReactSite/v3/react_social_web/src/components/MainPage/MainPage.js"],"names":["React","classes","Link","Button","Card","CardActionArea","CardContent","Typography","CardActions","Redirect","MainPage","Component","state","title","description","onBtnClick","props","addPost","setState","watchPost","changeNewPost","e","id","currentTarget","value","render","localStorage","getItem","comments","data","comment","allPosts","post","sort","a","b","created_at","length","map","item","comCount","forEach","i","commentable_id","push","card","link_title","link","loading","main","position_posts","post_count","form_post","title_input","description_input"],"mappings":"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","sourcesContent":["import React from 'react';\nimport classes from './MainPage.module.css'\nimport {Link} from 'react-router-dom'\nimport { Button, Card, CardActionArea, CardContent, Typography, CardActions } from '@material-ui/core';\nimport { Redirect } from 'react-router-dom'\n\nclass MainPage extends React.Component {\n  state = {\n    title: '',\n    description: '',\n  }\n\n  onBtnClick = () => {\n    this.props.addPost(this.state)\n    this.setState({\n      title: '',\n      description: '',\n    })\n    this.props.watchPost()\n  }\n\n  changeNewPost = (e) => {\n    const { id } = e.currentTarget\n    this.setState({ [id]: e.currentTarget.value })\n  }\n\n  render () {\n    if (!localStorage.getItem('Uid')) {\n      return <div><Redirect to={'/login'} /></div> \n    } \n    const comments = this.props.data.comment\n\n    let allPosts\n    if (this.props.data.post[0]) {\n      allPosts = this.props.data.post.sort(function (a, b) {\n        if (a.created_at > b.created_at) {\n          return -1;\n        }\n        if (a.created_at < b.created_at) {\n          return 1;\n        }\n        return 0;\n      });\n    }\n\n    if (this.props.data.post.length) {\n      allPosts = this.props.data.post.map(function (item) {\n        let comCount = []\n        if(comments[0]) {\n          comments.forEach(i => {\n            if (i.commentable_id == item.id) {\n              comCount.push(i)\n            }\n          });\n        }\n        return (\n            <Card key={item.id} className={classes.card}>\n                <CardActionArea>\n                    <CardContent>\n                      <Link to={`/post/${item.id}`} className={classes.link_title}>\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\" className={classes.link} >\n                          {item.title}\n                        </Typography>\n                        <Typography className={classes.description} variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                          {item.description}\n                        </Typography>\n                      </Link>\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    <label>\n                        Comments:{comCount.length}\n                    </label>\n                </CardActions>\n            </Card>\n        )\n      })\n    } else if (this.props.data.post.loading) {\n      allPosts = <p>Load...</p>\n    } else {\n      allPosts = <p>No posts :(</p>\n    }\n    return (\n      <div className={classes.main}>        \n        <div className={classes.position_posts}>\n          {allPosts}\n          <div className={classes.post_count}>\n            <p>post count: {this.props.data.post.length}</p>\n          </div> \n        </div>\n        <form className={classes.form_post}>        \n            <label>Title:</label>\n            <input value={this.state.title} \n                   onChange={this.changeNewPost} \n                   className={classes.title_input} \n                   id=\"title\">\n            </input><br/>\n\n            <textarea value={this.state.description} \n                      onChange={this.changeNewPost} \n                      id='description' \n                      className={classes.description_input} /><br/>\n\n            <Button onClick={this.onBtnClick} variant=\"contained\" color=\"primary\">\n              Add post\n            </Button>\n          </form>\n      </div>\n    );\n  }\n}\n\nexport default MainPage;"]},"metadata":{},"sourceType":"module"}