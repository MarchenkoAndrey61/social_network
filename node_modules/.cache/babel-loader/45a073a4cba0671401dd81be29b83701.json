{"ast":null,"code":"import { call, put, takeEvery, take, race, fork, takeLatest, select } from 'redux-saga/effects';\nimport { store } from '../store/configureStore';\nimport { postReducer } from '../reducers/posts';\nimport { rootReducer } from '../reducers';\nexport function reducerPost(state = {\n  title: '',\n  description: '',\n  loading: false\n}, action) {\n  switch (action.type) {\n    case 'REQUESTED_POST':\n      return {\n        title: '',\n        description: '',\n        loading: true\n      };\n\n    case 'REQUESTED_POST_SUCCEEDED':\n      return action.data;\n\n    default:\n      return state;\n  }\n}\n;\nexport function reducerCurrentPost(state = {\n  id: null,\n  title: '',\n  description: '',\n  loading: false\n}, action) {\n  switch (action.type) {\n    case 'REQUESTED_CURRENT_POST':\n      return {\n        id: null,\n        title: '',\n        description: '',\n        loading: true\n      };\n\n    case 'CURRENT_POST_SUCCEEDED':\n      return action.data;\n\n    default:\n      return state;\n  }\n}\nexport function reducerComment(state = {\n  message: '',\n  loading: false\n}, action) {\n  switch (action.type) {\n    case 'REQUESTED_COMMENT':\n      return {\n        message: '',\n        loading: true\n      };\n\n    case 'REQUESTED_COMMENT_SUCCEEDED':\n      return action.data;\n\n    default:\n      return state;\n  }\n}\n;\nexport function reducerMyProfile(state = {\n  email: '',\n  firs_name: '',\n  second_name: '',\n  loading: false\n}, action) {\n  switch (action.type) {\n    case 'REQUESTED_MY_PROFILE':\n      return {\n        email: '',\n        firs_name: '',\n        second_name: '',\n        loading: true\n      };\n\n    case 'REQUESTED_MY_PROFILE_SUCCEEDED':\n      return action.data.data;\n\n    default:\n      return state;\n  }\n}\n; // Action Creators\n\nconst requestPost = () => {\n  return {\n    type: 'REQUESTED_POST'\n  };\n};\n\nconst requestComment = () => {\n  return {\n    type: 'REQUESTED_COMMENT'\n  };\n};\n\nconst requestMyProfile = () => {\n  return {\n    type: 'REQUESTED_MY_PROFILE'\n  };\n};\n\nconst requestMyProfileSuccess = data => {\n  return {\n    type: 'REQUESTED_MY_PROFILE_SUCCEEDED',\n    data\n  };\n};\n\nconst requestPostSuccess = data => {\n  return {\n    type: 'REQUESTED_POST_SUCCEEDED',\n    data\n  };\n};\n\nconst requestCurrentPost = data => {\n  return {\n    type: 'REQUESTED_CURRENT_POST',\n    data\n  };\n};\n\nconst requestCommentSuccess = data => {\n  return {\n    type: 'REQUESTED_COMMENT_SUCCEEDED',\n    data\n  };\n};\n\nconst requestPostError = () => {\n  return {\n    type: 'REQUESTED_POST_FAILED'\n  };\n}; // Sagas\n\n\nexport function* watchFetchPost() {\n  yield takeEvery('FETCHED_POST', fetchPostAsync);\n  yield takeEvery('ADD_POST', fetchAddPostAsync);\n  yield takeEvery('ADD_COMMENT', fetchAddCommentAsync);\n  yield takeEvery('FETCHED_EDIT_POST', fetchEditPostAsync);\n  yield takeEvery('FETCHED_COMMENT', fetchCommentAsync);\n  yield takeEvery('FETCHED_MY_PROFILE', fetchMyProfileAsync);\n  yield take('CURRENT_POST', fetchCurrentPostAsync);\n}\n\nfunction* fetchMyProfileAsync() {\n  yield put(requestMyProfile());\n  const data = yield call(() => {\n    return fetch('https://postify-api.herokuapp.com/users/me', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Token': localStorage.getItem('Access-Token'),\n        'Client': localStorage.getItem('Client'),\n        'Uid': localStorage.getItem('Uid')\n      }\n    }).then(data => {\n      return data.json();\n    });\n  });\n  yield put(requestMyProfileSuccess(data));\n}\n\nfunction* fetchPostAsync() {\n  yield put(requestPost());\n\n  try {\n    const data = yield call(() => {\n      return fetch('https://postify-api.herokuapp.com/posts', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Token': localStorage.getItem('Access-Token'),\n          'Client': localStorage.getItem('Client'),\n          'Uid': localStorage.getItem('Uid')\n        }\n      }).then(res => res.json()).then(data => {\n        return data;\n      });\n    });\n    yield put(requestPostSuccess(data));\n  } catch (error) {\n    yield put(requestPostError());\n  }\n}\n\nfunction* fetchCommentAsync() {\n  yield put(requestComment());\n\n  try {\n    const data = yield call(() => {\n      return fetch('https://postify-api.herokuapp.com/comments', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Token': localStorage.getItem('Access-Token'),\n          'Client': localStorage.getItem('Client'),\n          'Uid': localStorage.getItem('Uid')\n        }\n      }).then(res => res.json()).then(data => {\n        return data;\n      });\n    });\n    yield put(requestCommentSuccess(data));\n  } catch (error) {\n    yield put(requestPostError());\n  }\n}\n\nfunction* fetchAddPostAsync(data) {\n  fetch('https://postify-api.herokuapp.com/posts', {\n    method: 'POST',\n    body: JSON.stringify(data.data),\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Token': localStorage.getItem('Access-Token'),\n      'Client': localStorage.getItem('Client'),\n      'Uid': localStorage.getItem('Uid')\n    }\n  });\n  yield fetchPostAsync();\n}\n\nfunction* fetchAddCommentAsync(data) {\n  fetch('https://postify-api.herokuapp.com/comments', {\n    method: 'POST',\n    body: JSON.stringify(data.data),\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Token': localStorage.getItem('Access-Token'),\n      'Client': localStorage.getItem('Client'),\n      'Uid': localStorage.getItem('Uid')\n    }\n  });\n  yield fetchCommentAsync();\n}\n\nfunction* fetchEditPostAsync(data) {\n  fetch(`https://postify-api.herokuapp.com/posts/${data.data.id}`, {\n    method: 'PUT',\n    body: JSON.stringify(data.data),\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Token': localStorage.getItem('Access-Token'),\n      'Client': localStorage.getItem('Client'),\n      'Uid': localStorage.getItem('Uid')\n    }\n  });\n  yield fetchPostAsync();\n  yield fetchPostAsync();\n}\n\nfunction* fetchCurrentPostAsync(id) {\n  const data = call(() => {\n    return fetch(`https://postify-api.herokuapp.com/posts/${id.id}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Token': localStorage.getItem('Access-Token'),\n        'Client': localStorage.getItem('Client'),\n        'Uid': localStorage.getItem('Uid')\n      }\n    }).then(res => res.json()).then(data => {\n      return data;\n    });\n  });\n  yield put(requestCurrentPost(data));\n}","map":{"version":3,"sources":["/Users/norikon/ReactSite/v3/react_social_web/src/sagas/saga.js"],"names":["call","put","takeEvery","take","race","fork","takeLatest","select","store","postReducer","rootReducer","reducerPost","state","title","description","loading","action","type","data","reducerCurrentPost","id","reducerComment","message","reducerMyProfile","email","firs_name","second_name","requestPost","requestComment","requestMyProfile","requestMyProfileSuccess","requestPostSuccess","requestCurrentPost","requestCommentSuccess","requestPostError","watchFetchPost","fetchPostAsync","fetchAddPostAsync","fetchAddCommentAsync","fetchEditPostAsync","fetchCommentAsync","fetchMyProfileAsync","fetchCurrentPostAsync","fetch","method","headers","localStorage","getItem","then","json","res","error","body","JSON","stringify"],"mappings":"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","sourcesContent":["import { \n        call, \n        put, \n        takeEvery, \n        take, \n        race, \n        fork, \n        takeLatest, \n        select \n      } from 'redux-saga/effects'\nimport { store } from '../store/configureStore';\nimport { postReducer } from '../reducers/posts';\nimport { rootReducer } from '../reducers';\n  \nexport function reducerPost(state = {\n  title: '',\n  description: '',\n  loading: false,\n}, action) {\n    switch (action.type) {\n      case 'REQUESTED_POST':\n        return {\n          title: '',\n          description: '',\n          loading: true,\n        };\n      case 'REQUESTED_POST_SUCCEEDED':\n        return action.data\n      default:\n        return state;\n    }\n};\n  \nexport function reducerCurrentPost(state = {\n  id: null,\n  title: '',\n  description: '',\n  loading: false,\n}, action) {\n  switch (action.type) {\n    case 'REQUESTED_CURRENT_POST':\n      return {\n        id: null,\n        title: '',\n        description: '',\n        loading: true,\n      }\n    case 'CURRENT_POST_SUCCEEDED':\n      return action.data\n    default:\n      return state;\n  }\n}\n\nexport function reducerComment(state = {\n  message: '',\n  loading: false,\n}, action) {\n    switch (action.type) {\n      case 'REQUESTED_COMMENT':\n        return {\n          message: '',\n          loading: true,\n        }\n      case 'REQUESTED_COMMENT_SUCCEEDED':\n        return action.data\n      default:\n        return state;\n    }\n};\n\nexport function reducerMyProfile(state = {\n  email: '',\n  firs_name: '',\n  second_name: '',\n  loading: false\n}, action) {\n    switch (action.type) {\n      case 'REQUESTED_MY_PROFILE':\n          return {\n            email: '',\n            firs_name: '',\n            second_name: '',\n            loading: true\n          }\n      case 'REQUESTED_MY_PROFILE_SUCCEEDED':\n        return action.data.data\n      default:\n        return state;\n    }\n};\n\n\n\n\n\n// Action Creators\nconst requestPost = () => {\n    return { type: 'REQUESTED_POST' }\n};\n\nconst requestComment = () => {\n  return { type: 'REQUESTED_COMMENT' }\n};\n\n\nconst requestMyProfile = () => {\n  return { type: 'REQUESTED_MY_PROFILE' }\n}\n\nconst requestMyProfileSuccess = (data) => {\n  return { type: 'REQUESTED_MY_PROFILE_SUCCEEDED', data }\n}\n\nconst requestPostSuccess = (data) => {\n  return { type: 'REQUESTED_POST_SUCCEEDED', data }\n};\n\nconst requestCurrentPost = (data) => {\n    return { type: 'REQUESTED_CURRENT_POST', data }\n};\n\nconst requestCommentSuccess = (data) => {\n  return { type: 'REQUESTED_COMMENT_SUCCEEDED', data }\n};\n\nconst requestPostError = () => {\n    return { type: 'REQUESTED_POST_FAILED' }\n};\n\n  // Sagas\nexport function* watchFetchPost() {\n  yield takeEvery('FETCHED_POST', fetchPostAsync)\n  yield takeEvery('ADD_POST', fetchAddPostAsync)\n  yield takeEvery('ADD_COMMENT', fetchAddCommentAsync)\n  yield takeEvery('FETCHED_EDIT_POST', fetchEditPostAsync)\n  yield takeEvery('FETCHED_COMMENT', fetchCommentAsync)\n  yield takeEvery('FETCHED_MY_PROFILE', fetchMyProfileAsync)\n  yield take('CURRENT_POST', fetchCurrentPostAsync)\n}\n  \nfunction* fetchMyProfileAsync() {\n  yield put(requestMyProfile())\n  const data = yield call(() => {\n    return fetch('https://postify-api.herokuapp.com/users/me', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Token': localStorage.getItem('Access-Token'),\n        'Client': localStorage.getItem('Client'),\n        'Uid': localStorage.getItem('Uid'),\n      }\n    }).then(data => {\n      return data.json()\n    })\n  })\n  yield put(requestMyProfileSuccess(data))\n}\n\n  function* fetchPostAsync() {\n    yield put(requestPost())\n    try {\n      const data = yield call(() => {\n        return fetch('https://postify-api.herokuapp.com/posts', {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Access-Token': localStorage.getItem('Access-Token'),\n                        'Client': localStorage.getItem('Client'),\n                        'Uid': localStorage.getItem('Uid'),\n                    }})\n                .then(res => res.json())\n                .then(data => {\n                  return data\n                })\n        } \n      );\n      yield put(requestPostSuccess(data));\n    } catch (error) {\n      yield put(requestPostError());\n    }\n  }\n\n\n\n  function* fetchCommentAsync() {\n    yield put(requestComment())\n    try {\n      const data = yield call(() => {\n        return fetch('https://postify-api.herokuapp.com/comments', {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Access-Token': localStorage.getItem('Access-Token'),\n                        'Client': localStorage.getItem('Client'),\n                        'Uid': localStorage.getItem('Uid'),\n                    }})\n                .then(res => res.json())\n                .then(data => {\n                  return data\n                })\n        } \n      );\n      yield put(requestCommentSuccess(data));\n    } catch (error) {\n      yield put(requestPostError());\n    }\n  }\n\n\nfunction* fetchAddPostAsync(data) {\n  fetch('https://postify-api.herokuapp.com/posts', {\n    method: 'POST',\n    body: JSON.stringify(data.data),\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Token': localStorage.getItem('Access-Token'),\n      'Client': localStorage.getItem('Client'),\n      'Uid': localStorage.getItem('Uid'),\n  }})\n  yield fetchPostAsync()\n}\n\nfunction* fetchAddCommentAsync(data) {\n  fetch('https://postify-api.herokuapp.com/comments', {\n    method: 'POST',\n    body: JSON.stringify(data.data),\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Token': localStorage.getItem('Access-Token'),\n      'Client': localStorage.getItem('Client'),\n      'Uid': localStorage.getItem('Uid'),\n  }})\n  yield fetchCommentAsync()\n}\n\nfunction* fetchEditPostAsync(data) {\n  fetch(`https://postify-api.herokuapp.com/posts/${data.data.id}`, {\n    method: 'PUT',\n    body: JSON.stringify(data.data),\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Token': localStorage.getItem('Access-Token'),\n      'Client': localStorage.getItem('Client'),\n      'Uid': localStorage.getItem('Uid'),\n  }})\n  yield fetchPostAsync()\n  yield fetchPostAsync()\n}\n\nfunction* fetchCurrentPostAsync(id) {\n  const data = call(() => {\n    return fetch(`https://postify-api.herokuapp.com/posts/${id.id}`, {\n                  method: 'GET',\n                  headers: {\n                      'Content-Type': 'application/json',\n                      'Access-Token': localStorage.getItem('Access-Token'),\n                      'Client': localStorage.getItem('Client'),\n                      'Uid': localStorage.getItem('Uid'),\n                  }})\n              .then(res => res.json())\n              .then(data => {\n                return data\n              })\n    })\n  yield put(requestCurrentPost(data));\n} \n"]},"metadata":{},"sourceType":"module"}